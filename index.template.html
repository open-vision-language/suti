<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="bootstrap.min.css" rel="stylesheet" />
    <meta name="twitter:card" content="summary_large_image" />
    <!-- anon-on -->
    <meta name="twitter:site" content="@GoogleAI" />
    <!-- anon-off -->
    <meta name="twitter:title" content="{{ twitter_title }}" />
    <meta name="twitter:description" content="{{ twitter_desc }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="styles.css" />

    <script src="jquery.min.js"></script>
    <script src="jquery.flip.min.js"></script>


    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SMWK19DNCN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-SMWK19DNCN');
    </script>

    <title>{{ website_title }}</title>
  </head>
  <body>
    <div id="gallery0" style="padding-top: 50px; padding-bottom: 20px; background-color: rgb(245,245,245);"> 

      <h2 style="text-align: center;">{{ paper_title1 }}</h2>
      {% if paper_title2 is defined %}
        <h2 style="text-align: center;">{{ paper_title2 }}</h2>
      {% endif %}

      <!-- anon-on -->
      <div class="authors text-center">
        <div class="row">
          <div class="col">
            <a href="https://wenhuchen.github.io/">Wenhu Chen</a><sup>*</sup>
          </div>
          <div class="col">
            <a href="https://www.hexianghu.com/">Hexiang Hu</a><sup>*</sup>
          </div>
          <div class="col">
            <a href="https://cold-winter.github.io/">Yandong Li</a>
          </div>
          <div class="col">
            <a href="https://natanielruiz.github.io/">Nataniel Ruiz</a>
          </div>
          <div class="col">
            <a href="https://scholar.google.com/citations?user=vO0VSSYAAAAJ&hl=en">Xuhui Jia</a>
          </div>
          <div class="col">
            <a href="https://mingweichang.org/">Ming-Wei Chang</a>
          </div>
          <div class="col">
            <a href="http://www.cs.cmu.edu/~wcohen/">William W. Cohen</a>
          </div>
        </div>
        <div class="row mt-1">
          <div class="col text-small">(*: Core Contribution)</div>
        </div>
        <div class="row mt-2">
          <div class="col">
            <img src="assets/GoogleResearch.svg" alt="Google Research" height=50>
          </div>
        </div>
        <div class="row nomobile">
          <center><a href="{{ paper_url }}" target="_blank"><img class="thumbnail" src="assets/paper_thumbnail.png"></a></center>
        </div>
      </div>
      <!-- anon-off -->
    </div>

    <div class="header_dark_gray text-center">
      <h2>SuTI is an <i>in-context</i> subject-driven text-to-image generator that draws subject-specific images <i>without fine-tuning</i></h2>
    </div>
    <div class="abstract">
      <div class="inside">
        <p class="text">
        {{ paper_abstract }}
        </p>
        <!-- anon-on -->
        <a class="read-paper" href="{{ paper_url }}" target="_blank"><button>Research Paper</button></a>
        <!-- anon-off -->
      </div>
    </div>

    <div class="header_dark_gray text-center">
      <h2>Zero-shot subjec-specific generations on the DreamBench-v2</h2>
      <h8>Given a few demonstrations from the users, SuTI is able to generate subject-specific images instantly (~ 20-30 seconds on TPUv4), and without fine-tuning</h8>
    </div>
    <div class="image_8" id="gallery1">
      <div class="flipcard" id="fig0">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig1">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img />
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig2">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig3">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig4">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig5">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig6">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
      <div class="flipcard nomobile" id="fig7">
        <div class="front">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
        <div class="back">
          <figure>
            <img>
            <figcaption class="subject_title"><span style="color: #c994c7">Subject Images</span>:</figcaption>
            <div class="subject"></div>
            <figcaption class="description"></figcaption>
          </figure>
        </div>
      </div>
    </div>

    <div class="header_dark_gray text-center">
      <h2>SuTI behaves adaptively as the # of in-context examples increases</h2>
      <h8>When # of in-context examples = 0, SuTI generates its text-only prior;</h8> <br/>
      <h8>When # of in-context examples = 1, SuTI behaves similar to image editing model;</h8> <br/>
      <h8>When # of in-context examples > 1, SuTI generates novel poses/views of the subject.</h8>
    </div>
    <div class="row mt-4 mb-4">
      <img src="assets/kshot_study.jpg" class="figure_image">
    </div>

    <div class="header_dark_gray text-center">
      <h2>SuTI not only re-contextualizes subject images but can <i>compose multiple transformations</i> together</h2>
    </div>
    <div class="row mt-4 mb-4">
      <img src="assets/compose_transformation.jpg" class="figure_image">
    </div>

    <div class="header_dark_gray text-center">
      <h2>SuTI has a set of diverse skills in generating high-quality subject-specific images</h2>
      <h8>In addition to re-contextualize, SuTI can accessorize, stylize, colorize and synthesize novel view for subject-specific images</h8>
    </div>
    <div class="row mt-2 mb-2">
      <img src="assets/accessory.jpg" class="figure_image">
    </div>
    <div class="row mt-2 mb-2">
      <img src="assets/style.jpg" class="figure_image">
    </div>
    <div class="row mt-2 mb-2">
      <img src="assets/color.jpg" class="figure_image">
    </div>
    <div class="row mt-2 mb-2">
      <img src="assets/multiview.jpg" class="figure_image">
    </div>

    <div class="header_dark_gray text-center">
      <h2>Failure modes of the SuTI</h2>
    </div>
    <div class="row mt-4 mb-4">
      <img src="assets/failure.png" class="figure_image">
    </div>

<!-- anon-on -->
<div class="content">
  <h1>Special Thanks</h1>
  <p class="smaller" style="text-align: justify;">{{ acknowledgement }}</p>
</div>
<!-- anon-off -->

<script type="text/javascript">

  gallery_images = [
  {% for item in gallery %}
  {
    "src": "{{ item.src }}",
    "description": "<span style='color: #dd1c77'>Text</span>: {{ item.description }}",
    "subjects": "<img class='subject_image' src='{{ item.src[:-5] }}/gt1.jpg'/> <img class='subject_image' src='{{ item.src[:-5] }}/gt2.jpg'/> <img class='subject_image' src='{{ item.src[:-5] }}/gt3.jpg'/> <img class='subject_image' src='{{ item.src[:-5] }}/gt4.jpg'/>"
  },
  {% endfor %}
  ];

  lastCardFlippedIdx = {
    gallery1: -1,
  };

  lastCardFlippedLastSwapTime = {
    gallery1: -1,
  };

  $(".flipcard").flip({
    trigger: "manual",
    reverse: false,
  });

  function checkIfImageIsVisible(name, image) {
    numCards = $(name + " .flipcard:visible").size();

    for (var cardIdx = 0; cardIdx < numCards; ++cardIdx) {
      var isFlipped = $(name + " #fig" + cardIdx).data("flip-model").isFlipped;
      if (!isFlipped) {
        src = $(name + " #fig" + cardIdx + " div.front figure img").attr("src")
      } else {
        src = $(name + " #fig" + cardIdx + " div.back figure img").attr("src")
      }

      if (image.src == src) {
        return true;
      }
    }
    return false;
  }

  function getNextImage(name) {
    // different galleries have different sources of imagery.
    img_src = gallery_images;
    while (true) {
      randomImageIdx = Math.floor(Math.random() * img_src.length);
      if (!checkIfImageIsVisible(name, img_src[randomImageIdx])) {
        return img_src[randomImageIdx];
      }
    }
  }

  function randomSwapImageWithId(name, randomCardIdx) {
    numCards = $(name + " .flipcard:visible").size();

    image = getNextImage(name);

    const d = new Date();
    let currentTime = d.getTime();
    lastCardFlippedIdx[name] = randomCardIdx;
    lastCardFlippedLastSwapTime[name] = currentTime;

    var isFlipped = $(name + " #fig" + randomCardIdx).data("flip-model").isFlipped;
    if (!isFlipped) {
      $(name + " #fig" + randomCardIdx + " div.back figure img").attr("src", image.src)
      $(name + " #fig" + randomCardIdx + " div.back figure figcaption.description").html(image.description)
      $(name + " #fig" + randomCardIdx + " div.back figure div.subject").html(image.subjects)
    } else {
      $(name + " #fig" + randomCardIdx + " div.front figure img").attr("src", image.src)
      $(name + " #fig" + randomCardIdx + " div.front figure figcaption.description").html(image.description)
      $(name + " #fig" + randomCardIdx + " div.front figure div.subject").html(image.subjects)
    }

    $(name + " #fig" + randomCardIdx).flip("toggle");
  }

  function randomSwapImage(name) {
    numCards = $(name + " .flipcard:visible").size();

    const d = new Date();
    if (d.getTime() - lastCardFlippedIdx[name] < 5000) {
      setTimeout(randomSwapImage, 1000, name);
      return;
    }

    do {
      randomCardIdx = Math.floor(Math.random() * numCards);
      if (numCards == 1) {
        break;
      }
    } while (randomCardIdx == lastCardFlippedIdx[name]);

    randomSwapImageWithId(name, randomCardIdx);
    setTimeout(randomSwapImage, 3000, name);
  }

  function setupGallery1(id) {
        randomSwapImageWithId("#gallery1", id);
        $("#gallery1 #fig" + id).click(
          function() {
            randomSwapImageWithId("#gallery1", id);
          }
        );
  }
  for (id = 0; id < 8; id ++) {
        setupGallery1(id);
  }

  setTimeout(randomSwapImage, 1000, "#gallery1");
</script>

<script type="text/javascript">
  compositionalAnimalsManualClicked = false;
  compositionalMadeOfManualClicked = false;

  comp_files = {
    "Original (with mask)": "./images/inpaint/boston_masked.jpg",
    "\"New York in the background\"": "./images/inpaint/boston_nyc.jpg",
    "\"Paris in the background\"": "./images/inpaint/boston_paris.jpg",
    "\"San Francisco in the background\"": "./images/inpaint/boston_sf.jpg"
  }

  function updateComposition(name) {
    var compositionSpans = $(name + " p span.selected").map(function() {
      return $(this).text();
    }).get();
    var compositionText = "";
    for (var compositionSpansIdx = 0; compositionSpansIdx < compositionSpans.length; ++compositionSpansIdx) {
      if (compositionSpansIdx > 0) {
        compositionText += " ";
      }
      compositionText += compositionSpans[compositionSpansIdx];
    }
    if (name == "#compositional_madeof") {
      if (compositionText == "Original") {
        $(name + "_img").attr("src", "./images/edit_opt/orig.gif")
      } else {
        // Generate a random index that is not the one already selected
        randImgIdx = "/"; // something guaranteed to be in the path
        cur_src = $(name + "_img").attr("src");
        while (cur_src.search(randImgIdx) != -1) {
          randImgIdx = Math.floor(Math.random() * 4);
        }
        first_space = compositionText.search(" ");
        file = compositionText.slice(first_space + 1, -2).replaceAll(" ", "-");
        $(name + "_img").attr("src", "./images/edit_opt/" + file + "_" + randImgIdx + ".gif")
      }
    } else if (name == "#compositional_animals") {
      randImgIdx = Math.floor(Math.random() * 4);
      $(name + "_img").attr("src", comp_files[compositionText]);
    }
  }

  function randomComposition(name) {
    if (name == "#compositional_animals" && compositionalAnimalsManualClicked == true) {
      compositionalAnimalsManualClicked = false;
      setTimeout(randomComposition, 4000, name);
      return;
    } else if (name == "#compositional_madeof" &&
               compositionalMadeOfManualClicked == true) {
      compositionalMadeOfManualClicked = false;
      setTimeout(randomComposition, 4000, name);
      return;
    }

    var compositionPs = $(name + " p.selectable").toArray();
    var compositionOptions = [];
    for (var i = 0; i < compositionPs.length; ++i) {
      var compositionSpanSelected = $(compositionPs[i]).children("span.selected");
      var compositionSpans = $(compositionPs[i]).children("span").not("span.selected").toArray();
      for (var j = 0; j < compositionSpans.length; ++j) {
        compositionOption = {
          "p": compositionPs[i],
          "span_selected": compositionSpanSelected,
          "span_option": $(compositionSpans[j])
        };
        compositionOptions.push(compositionOption);
      }
    }

    randomCompositionOptionIdx = Math.floor(Math.random() * compositionOptions.length);
    randomCompositionOption = compositionOptions[randomCompositionOptionIdx];

    randomCompositionOption.span_selected.toggleClass("selected");
    randomCompositionOption.span_option.toggleClass("selected");

    updateComposition(name);
    setTimeout(randomComposition, 4000, name);
  }

  $("#compositional_animals p.selectable span").click(function() {
    $(this).siblings().removeClass("selected");
    $(this).addClass("selected");
    updateComposition("#compositional_animals");
    compositionalAnimalsManualClicked = true;
  });
  $("#compositional_madeof_img").click(function() {
    updateComposition("#compositional_madeof");
    compositionalAnimalsManualClicked = true;
  });

  $("#compositional_madeof p.selectable span").click(function() {
    $(this).siblings().removeClass("selected");
    $(this).addClass("selected");
    updateComposition("#compositional_madeof");
    compositionalMadeOfManualClicked = true;
  });

  <!-- setTimeout(randomComposition, 2000, "#compositional_animals"); -->
  <!-- setTimeout(randomComposition, 4000, "#compositional_madeof"); -->
</script>
<script src="bootstrap.bundle.min.js"></script>
  </body>
</html>
